http:
  middlewares:
    tailnet-restricted:
      ipAllowList:
        sourceRange:
          - "100.64.0.0/10"
          - "127.0.0.1/32"


  routers:
    nas1:
      rule: Host(`nas1.ts.varma01.dev`)
      entryPoints:
        - websecure
      service: nas1
      middlewares:
        - tailnet-restricted@file
      tls:
        certResolver: cf
    
    nas1Router:
      rule: Host(`router.nas1.ts.varma01.dev`)
      entryPoints:
        - websecure
      service: nas1Router
      middlewares:
        - tailnet-restricted@file
      tls:
        certResolver: cf
  

  services:
    nas1:
      loadBalancer:
        servers:
          - url: http://10.12.1.5:18080/

    nas1Router:
      loadBalancer:
        servers:
          - url: https://10.12.1.1/
        serversTransport: allowInsecure
  

  serversTransports:
    allowInsecure:
      insecureSkipVerify: true